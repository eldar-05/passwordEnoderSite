<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Шифратор паролей (AES)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; max-width: 850px; margin: 40px auto; }
    input, textarea, button { width: 100%; margin: 10px 0; padding: 10px; }
    label { font-weight: bold; }
    .warn { color: red; font-size: 0.9em; }
  </style>
</head>
<body>
  <h3> passoword decoder for personal usage</h3>
  <p>Сайт не сохраняет данные. Всё работает локально, без базы и бэкенда. Расшифровка происходит на вашем пк, нет передачи данных на сервер
Ни мастер-пароль, ни зашифрованный текст никогда не покидают твой пк</p>

  <label>Мастер-пароль:</label>
  <input id="masterKey" placeholder="Введите мастер-пароль">
  <input id="confirmKey" placeholder="Повторите мастер-пароль">

  <label>Пароль (если шифруете):</label>
  <br>
  <label>Шифр (если расшифровываете):</label>
  <textarea id="inputText" rows="3" placeholder="Введите текст..."></textarea>

  <button onclick="encrypt()">Зашифровать</button>
  <button onclick="decrypt()">Расшифровать</button>

  <p class="warn">Перед сохранением шифра убедитесь, что мастер-пароль введён верно. При его потере или ошибке вы не сможете расшифровать пароль!</p>

  <label>Результат:</label>
  <textarea id="outputText" rows="3" readonly placeholder="Вывод:"></textarea>

  <script>
    function encrypt() {
      const text = document.getElementById("inputText").value;
      const key = document.getElementById("masterKey").value;
      const confirmKey = document.getElementById("confirmKey").value;
      if (!text || !key || !confirmKey) {
        alert("Пожалуйста, заполните все поля.");
        return;
      }
      if (key !== confirmKey) {
        alert("❌ Мастер-пароли не совпадают. Возможно, опечатка.");
        return;
      }
      const encrypted = CryptoJS.AES.encrypt(text, key).toString();
      document.getElementById("outputText").value = encrypted;
    }
    function decrypt() {
      const encrypted = document.getElementById("inputText").value;
      const key = document.getElementById("masterKey").value;
      if (!encrypted || !key) {
        alert("Пожалуйста, введите шифр и мастер-пароль.");
        return;
      }
      try {
        const bytes = CryptoJS.AES.decrypt(encrypted, key);
        const decrypted = bytes.toString(CryptoJS.enc.Utf8);
        document.getElementById("outputText").value = decrypted || "Неверный ключ или повреждённые данные.";
      } catch (e) {
        document.getElementById("outputText").value = "Ошибка расшифровки.";
      }
    }
  </script>
</body>
</html>
